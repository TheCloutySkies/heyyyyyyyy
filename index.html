<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Clouty Skies</title>

  <meta name="description" content="Clouty Skies — Windows XP–style personal site, games, blog, and portfolio." />
  <meta property="og:title" content="Clouty Skies" />
  <meta property="og:image" content="/Net003_result.png" />
  <meta property="og:type" content="website" />

  <link rel="icon" type="image/png" sizes="32x32" href="/Net003.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="Img29_(Windows_Vista).jpg" />
  <meta name="theme-color" content="#245EDC" />

  <!-- Preconnect for speed -->
  <link rel="preconnect" href="https://unpkg.com" crossorigin>
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>

  <!-- XP.css -->
  <link rel="stylesheet" href="https://unpkg.com/xp.css" />

  <style>
    :root { 
      --desk-gap: 14px; 
      --maxw: 1024px; 
      --xp-blue: #245EDC;
    }
    
    html, body { 
      height: 100%; 
      overflow-x: hidden; 
      margin: 0;
      font-family: Tahoma, "Segoe UI", Arial, sans-serif;
      background-color: var(--xp-blue);
    }

    /* --- Layers --- */
    
    /* 1. Wallpaper Layer (Fixed, Back) */
    #wallpaper {
      position: fixed;
      inset: 0;
      z-index: 0;
      background: var(--xp-blue) url("https://upload.wikimedia.org/wikipedia/en/7/7d/Bliss.png") center/cover no-repeat fixed;
      transition: filter 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }

    /* 2. Desktop/Content Layer (Scrollable, Middle) */
    #desktop {
      position: relative;
      z-index: 1;
      min-height: 100%;
      transition: filter 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }

    /* 3. Boot Layer (Fixed, Top, Never Blurred) */
    #boot {
      position: fixed;
      inset: 0;
      display: grid;
      place-items: center;
      background: rgba(0, 0, 0, 0.25); /* Slight tint over the blur */
      z-index: 99999;
      transition: opacity 0.8s ease, visibility 0.8s;
    }

    /* Blur State Classes */
    .blur-target {
      filter: blur(15px) brightness(0.9);
    }

    /* Boot Fade Out */
    #boot.fade-out {
      opacity: 0;
      visibility: hidden;
      pointer-events: none;
    }

    /* --- Layout --- */
    .stack { 
      max-width: var(--maxw); 
      margin: 12px auto; 
      padding: 12px; 
      padding-bottom: 120px; 
      display: flex; 
      flex-direction: column; 
      gap: var(--desk-gap); 
    }

    .window { width: 100%; }
    .hero-wall { background: #f0f0f0; }

    /* --- Icons Grid --- */
    .icons {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
      gap: 16px;
      padding: 12px;
    }
    .icons a {
      text-decoration: none;
      color: inherit;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
    }
    .icons figure {
      margin: 0;
      padding: 6px;
      border-radius: 3px;
      border: 1px solid transparent;
      transition: background 0.1s, border-color 0.1s;
    }
    .icons a:focus figure,
    .icons a:hover figure {
      background: rgba(49, 106, 197, 0.2);
      border-color: rgba(49, 106, 197, 0.4);
      outline: none;
    }
    .icons img {
      width: 32px;
      height: 32px;
      display: block;
      margin: 0 auto 6px;
      image-rendering: pixelated;
    }
    .icons figcaption {
      font-size: 11px;
      line-height: 1.3;
    }

    /* --- Spotify Widget --- */
    #spotify-player-container.window { 
      position: fixed; 
      bottom: 20px; 
      right: 20px; 
      width: 300px; 
      z-index: 9000; 
      bottom: max(20px, env(safe-area-inset-bottom) + 10px);
      transition: transform 0.4s cubic-bezier(0.19, 1, 0.22, 1);
    }
    
    #spotify-player-container .window-body { 
      padding: 8px; 
      transition: padding 0.3s ease;
      background: #f0f0f0;
    }
    
    .spotify-iframe-wrapper { 
      height: 80px; 
      transition: height 0.3s ease, opacity 0.3s ease; 
      opacity: 1; 
      overflow: hidden;
    }

    #spotify-player-container.minimized .spotify-iframe-wrapper { height: 0; opacity: 0; }
    #spotify-player-container.minimized .window-body { padding-top: 0; padding-bottom: 0; border-top: 0; }
    #spotify-player-container.closed { transform: translateX(120%); }

    /* Touch targets */
    .title-bar-controls button { min-width: 20px; min-height: 20px; }
    @media (pointer: coarse) { .title-bar-controls button { min-width: 32px; min-height: 32px; } }

    /* Mobile */
    @media (max-width: 600px) {
      .stack { margin: 6px; padding: 6px; width: auto; padding-bottom: 140px; }
      .icons { grid-template-columns: repeat(3, 1fr); gap: 8px; }
      #spotify-player-container.window { width: 92%; left: 4%; right: 4%; }
      .term-embed { height: 350px; }
    }

    /* Terminal */
    .term-embed {
      background: #000;
      border: 1px solid #7f9db9;
      height: 480px;
      position: relative;
    }
    .term-embed iframe {
      width: 100%; height: 100%; border: 0;
      filter: grayscale(1) contrast(1.2) sepia(0.2) invert(0);
    }

    /* Sticky Notes */
    #notes-canvas { position: relative; min-height: 200px; overflow: hidden; }
  </style>
</head>
<body>

  <!-- 1. Background Layer -->
  <div id="wallpaper" class="blur-target"></div>

  <!-- 2. Boot Overlay (Top Layer, Not Blurred) -->
  <div id="boot" role="dialog" aria-modal="true">
    <div class="window" style="max-width: 350px; width: 90%; box-shadow: 0 10px 30px rgba(0,0,0,0.6);">
      <div class="title-bar">
        <div class="title-bar-text">CloutOS Boot Manager</div>
        <div class="title-bar-controls">
          <button aria-label="Close" onclick="finishBoot()"></button>
        </div>
      </div>
      <div class="window-body">
        <div style="text-align: center; margin-bottom: 15px; margin-top:5px;">
          <img src="https://win98icons.alexmeub.com/icons/png/computer_explorer_2k-4.png" alt="" width="48" style="image-rendering:pixelated; margin-bottom:8px;">
          <p style="margin:0; font-size:14px;">Initializing Environment...</p>
        </div>
        <div class="field-row" style="margin-bottom: 15px;">
          <progress class="marquee" style="width:100%"></progress>
        </div>
        <div style="display:flex; justify-content:flex-end; gap:6px;">
          <button class="button" onclick="finishBoot()" autofocus>Enter System</button>
        </div>
      </div>
    </div>
  </div>

  <!-- 3. Desktop Content (Blurred initially) -->
  <div id="desktop" class="blur-target">
    <main class="stack" id="main-content">
      
      <!-- Main Window -->
      <section class="window hero-wall">
        <div class="title-bar">
          <div class="title-bar-text">CloutyOS V.8.68 (User: Guest)</div>
          <div class="title-bar-controls">
            <button aria-label="Minimize"></button>
            <button aria-label="Maximize"></button>
            <button aria-label="Close"></button>
          </div>
        </div>
        <div class="window-body">
          <menu role="tablist" class="field-row" style="margin-bottom:12px;">
            <button role="tab" aria-selected="true" aria-controls="tab-home">Start</button>
            <button role="tab" aria-controls="tab-media">Media</button>
            <button role="tab" aria-controls="tab-games">Games</button>
          </menu>

          <div class="tab-content">
            <!-- Home Tab -->
            <article role="tabpanel" id="tab-home">
              <fieldset>
                <legend>System</legend>
                <div class="icons">
                  <a href="about.html"><figure><img src="https://win98icons.alexmeub.com/icons/png/certificate_2-0.png" alt="" /><figcaption>About</figcaption></figure></a>
                  <a href="blog.html"><figure><img src="https://win98icons.alexmeub.com/icons/png/notepad_file-0.png" alt="" /><figcaption>Blog</figcaption></figure></a>
                  <a href="https://thecloutyskies.github.io/Clouty-Skies-Research-Institute/" target="_blank"><figure><img src="https://win98icons.alexmeub.com/icons/png/world-0.png" alt="" /><figcaption>Research</figcaption></figure></a>
                  <a href="watch.html"><figure><img src="https://win98icons.alexmeub.com/icons/png/wm-2.png" alt="" /><figcaption>Watch</figcaption></figure></a>
                  <a href="https://lonniejohnston.com" target="_blank"><figure><img src="https://win98icons.alexmeub.com/icons/png/camera-0.png" alt="" /><figcaption>Portfolio</figcaption></figure></a>
                </div>
              </fieldset>
              <fieldset style="margin-top:10px;">
                <legend>Marketplace</legend>
                <div class="icons">
                  <a href="https://www.redbubble.com/people/cloutyskies/shop" target="_blank"><figure><img src="https://win98icons.alexmeub.com/icons/png/network_internet_pcs_installer-2.png" alt="" /><figcaption>Merch</figcaption></figure></a>
                </div>
              </fieldset>
            </article>

            <!-- Media Tab -->
            <article role="tabpanel" id="tab-media" hidden>
              <fieldset>
                <legend>Social Connections</legend>
                <div class="icons">
                  <a href="https://www.youtube.com/@CloutySkies" target="_blank"><figure><img src="https://win98icons.alexmeub.com/icons/png/camera3_vid-2.png" alt="" /><figcaption>YouTube</figcaption></figure></a>
                  <a href="https://www.instagram.com/thecloutyskies" target="_blank"><figure><img src="https://win98icons.alexmeub.com/icons/png/network_cool_two_pcs-0.png" alt="" /><figcaption>Instagram</figcaption></figure></a>
                  <a href="https://open.spotify.com/artist/3QbHatr8OY2onxDhLD4dmC" target="_blank"><figure><img src="https://win98icons.alexmeub.com/icons/png/cd_audio_cd_a-3.png" alt="" /><figcaption>Spotify</figcaption></figure></a>
                </div>
              </fieldset>
            </article>

            <!-- Games Tab -->
            <article role="tabpanel" id="tab-games" hidden>
              <fieldset>
                <legend>Applications</legend>
                <div class="icons">
                  <a href="cloutris.html"><figure><img src="https://win98icons.alexmeub.com/icons/png/defragment-0.png" alt="" /><figcaption>Cloutris</figcaption></figure></a>
                  <a href="clouty-hops.html"><figure><img src="https://win98icons.alexmeub.com/icons/png/game_mine_1-0.png" alt="" /><figcaption>Hops</figcaption></figure></a>
                  <a href="tic.html"><figure><img src="https://win98icons.alexmeub.com/icons/png/joystick-5.png" alt="" /><figcaption>TicTac</figcaption></figure></a>
                </div>
              </fieldset>
            </article>
          </div>
        </div>
        <div class="status-bar">
          <p class="status-bar-field">Ready</p>
          <p class="status-bar-field">Online</p>
        </div>
      </section>

      <!-- Sticky Notes -->
      <section class="window" id="notes-window">
        <div class="title-bar">
          <div class="title-bar-text">Sticky Notes</div>
          <div class="title-bar-controls">
            <button aria-label="Minimize"></button>
            <button aria-label="Close"></button>
          </div>
        </div>
        <div class="window-body">
          <form id="note-form" class="field-row" style="gap:6px; margin-bottom:8px;">
            <input id="note-input" type="text" style="flex:1" placeholder="Type a note..." maxlength="100">
            <select id="note-color">
              <option value="#fff8b0">Yellow</option>
              <option value="#c9f5ff">Blue</option>
              <option value="#d5ffd3">Green</option>
            </select>
            <button type="submit">Pin</button>
          </form>
          <div id="notes-canvas"></div>
        </div>
      </section>

      <!-- Command Prompt (Updated Title & Copyright) -->
      <section class="window">
        <div class="title-bar">
          <div class="title-bar-text">CloutAI Interface</div>
          <div class="title-bar-controls">
            <button aria-label="Minimize"></button>
            <button aria-label="Maximize"></button>
            <button aria-label="Close"></button>
          </div>
        </div>
        <div class="window-body" style="padding:0; overflow:hidden;">
          <div style="background:black; color:#0f0; padding:6px; font-family:Consolas, monospace; border-bottom:1px solid #333; line-height:1.4;">
            <div>CloutySkiesOS [Version 8.68]</div>
            <div>(C) Copyright 2023-2026 Clouty Skies Research Institute.</div>
            <br>
          </div>
          <div class="term-embed">
            <iframe src="https://studio.pickaxe.co/_embed/DTCTYCUGCU?d=deployment-66e1cd16-605c-461f-9f5e-b842a4ce63d4&hideInput=false" loading="lazy"></iframe>
          </div>
        </div>
      </section>
    </main>

    <!-- Spotify Widget -->
    <div id="spotify-player-container" class="window">
      <div class="title-bar">
        <div class="title-bar-text">
          <img src="https://win98icons.alexmeub.com/icons/png/cd_audio_cd_a-3.png" alt="" style="width:16px; height:16px; vertical-align:middle; margin-right:4px;">
          Music Player
        </div>
        <div class="title-bar-controls">
          <button aria-label="Minimize" id="btn-spotify-min"></button>
          <button aria-label="Close" id="btn-spotify-close"></button>
        </div>
      </div>
      <div class="window-body">
        <div class="spotify-iframe-wrapper">
          <iframe style="border-radius:0px; border:0;" 
            src="https://open.spotify.com/embed/artist/3QbHatr8OY2onxDhLD4dmC?utm_source=generator&theme=0" 
            width="100%" height="80" frameborder="0" 
            allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
            loading="lazy">
          </iframe>
        </div>
      </div>
    </div>
  </div>

  <script>
    /* --- Boot & Focus Logic --- */
    (function() {
      const bootScreen = document.getElementById('boot');
      const blurTargets = document.querySelectorAll('.blur-target');
      
      const hasBooted = sessionStorage.getItem('cloutySessionBoot');

      window.finishBoot = function() {
        // 1. Fade out boot screen
        bootScreen.classList.add('fade-out');
        
        // 2. Remove blur from background and desktop content
        blurTargets.forEach(el => el.classList.remove('blur-target'));
        
        // 3. Mark session as booted
        sessionStorage.setItem('cloutySessionBoot', 'true');
        
        setTimeout(() => { bootScreen.style.display = 'none'; }, 800);
      };

      if (hasBooted === 'true') {
        bootScreen.style.display = 'none';
        blurTargets.forEach(el => el.classList.remove('blur-target'));
      } else {
        // Auto-enter after 2.5 seconds if user doesn't click
        setTimeout(() => {
          if(!bootScreen.classList.contains('fade-out')) finishBoot();
        }, 2500);
      }
    })();

    /* --- Tabs Logic --- */
    (function() {
      const tabs = document.querySelectorAll('[role="tab"]');
      const panels = document.querySelectorAll('[role="tabpanel"]');
      tabs.forEach(tab => {
        tab.addEventListener('click', () => {
          tabs.forEach(t => t.setAttribute('aria-selected', 'false'));
          panels.forEach(p => p.hidden = true);
          tab.setAttribute('aria-selected', 'true');
          const target = document.getElementById(tab.getAttribute('aria-controls'));
          if (target) target.hidden = false;
        });
      });
    })();

    /* --- Spotify Widget Logic --- */
    (function() {
      const widget = document.getElementById('spotify-player-container');
      const btnMin = document.getElementById('btn-spotify-min');
      const btnClose = document.getElementById('btn-spotify-close');
      btnMin.addEventListener('click', (e) => {
        e.stopPropagation();
        widget.classList.toggle('minimized');
      });
      btnClose.addEventListener('click', (e) => {
        e.stopPropagation();
        widget.classList.add('closed');
      });
    })();

    /* --- Sticky Notes --- */
    (function() {
      const form = document.getElementById('note-form');
      const input = document.getElementById('note-input');
      const color = document.getElementById('note-color');
      const canvas = document.getElementById('notes-canvas');
      form.addEventListener('submit', (e) => {
        e.preventDefault();
        if(!input.value.trim()) return;
        const note = document.createElement('div');
        note.className = 'window'; 
        note.style.cssText = `position:absolute; top:${Math.random()*100}px; left:${Math.random()*100}px; width:150px; box-shadow:2px 2px 5px rgba(0,0,0,0.3); z-index:10;`;
        note.innerHTML = `
          <div class="window-body" style="background:${color.value}; padding:8px;">
            <p style="margin:0; font-size:12px; word-wrap:break-word;">${input.value.replace(/</g,'&lt;')}</p>
            <div style="text-align:right; margin-top:5px;"><button style="font-size:10px; padding:2px;" onclick="this.closest('.window').remove()">Del</button></div>
          </div>
        `;
        canvas.appendChild(note);
        input.value = '';
      });
    })();
  </script>
</body>
</html>
